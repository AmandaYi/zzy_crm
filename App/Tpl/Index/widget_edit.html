<form class="form-horizontal" action="{:U('index/widget_edit')}" method="post" >
	<input name="widget_id" type="hidden" value="{$edit_demo['id']}"/>
	<div class="control-group">
		<label class="control-label">{:L('COMPONENT_NAME')}</label>
		<div class="controls">
			<input type="text" id="title" name="title" value="{$edit_demo['title']}"/>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label">选择组件</label>
		<div class="controls">
			<select name="widget" id="widget">
				<volist name="widget_module" id="vo">
					<option mod="{$vo.module}" act="{$vo.action}" value="{$vo.tag}" <if condition="$edit_demo['widget'] eq $vo['tag']">selected="selected"</if>>
						{$vo.name}
					</option>
				</volist>
			</select>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label">数据来源</label>
		<div class="controls">
			<select name="level" id="level" disabled="true">
				<option value="1" selected>自己和下属</option>
			</select>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label"></label>
		<div class="controls">
			<input name="submit" class="btn btn-primary" type="submit" value="{:L('SAVE')}"/>
		</div>
	</div>
</form>
<script type="text/javascript">
	/**
	 * 页面加载时根据操作人权限去除部分无需设置权限的数据来源
	 **/
	$(document).ready(function(){
		var widget = $('#widget').val();
		if(widget == 'Notepad'){
			$('#level option:first').html('自己');
		}else{
			$('#level option:first').html('自己和下属');
		}
	});
	
	/**
	 * level值改变时根据操作人权限去除部分无需设置权限的数据来源
	 **/
	$('#widget').change(function(){
		var widget = $('#widget').val();
		if(widget == 'Notepad'){
			$('#level option:first').html('自己');
		}else{
			$('#level option:first').html('自己和下属');
		}
	});
</script>